// import { useState, useEffect } from 'react'
import Chart from '../BaseCharts/Chart.jsx';

const TrendChart = () => {
  // First, get data from URL
  // const [data, setData] = useState([]);
  
  // const getData = async() => {
  //   const response = await fetch("https://popper.ai/ncov19/trend_data_india.json");
  //   const data = await response.json();
  //   setData(data);
  // }

  // useEffect(() => {
  //   const data = getData();
  // }, []);

  // TODO: get this directly from URL
  const data = {
    'direct_trend': [{'x': 1620068400000, 'y': 37}, {'x': 1620072000000, 'y': 30}, {'x': 1620075600000, 'y': 18}, {'x': 1620079200000, 'y': 19}, {'x': 1620082800000, 'y': 24}, {'x': 1620086400000, 'y': 9}, {'x': 1620090000000, 'y': 15}, {'x': 1620093600000, 'y': 16}, {'x': 1620097200000, 'y': 18}, {'x': 1620100800000, 'y': 0}, {'x': 1620104400000, 'y': 0}, {'x': 1620108000000, 'y': 0}, {'x': 1620111600000, 'y': 0}, {'x': 1620115200000, 'y': 0}, {'x': 1620118800000, 'y': 0}, {'x': 1620122400000, 'y': 0}, {'x': 1620126000000, 'y': 0}, {'x': 1620129600000, 'y': 0}, {'x': 1620133200000, 'y': 0}, {'x': 1620136800000, 'y': 0}, {'x': 1620140400000, 'y': 0}, {'x': 1620144000000, 'y': 0}, {'x': 1620147600000, 'y': 0}, {'x': 1620151200000, 'y': 0}, {'x': 1620154800000, 'y': 0}, {'x': 1620100800000, 'y': 0}],
    'facebook_trend': [{'x': 1620068400000, 'y': 2}, {'x': 1620072000000, 'y': 0}, {'x': 1620075600000, 'y': 0}, {'x': 1620079200000, 'y': 0}, {'x': 1620082800000, 'y': 0}, {'x': 1620086400000, 'y': 0}, {'x': 1620090000000, 'y': 0}, {'x': 1620093600000, 'y': 0}, {'x': 1620097200000, 'y': 0}, {'x': 1620100800000, 'y': 0}, {'x': 1620104400000, 'y': 0}, {'x': 1620108000000, 'y': 0}, {'x': 1620111600000, 'y': 0}, {'x': 1620115200000, 'y': 0}, {'x': 1620118800000, 'y': 0}, {'x': 1620122400000, 'y': 0}, {'x': 1620126000000, 'y': 0}, {'x': 1620129600000, 'y': 0}, {'x': 1620133200000, 'y': 0}, {'x': 1620136800000, 'y': 0}, {'x': 1620140400000, 'y': 0}, {'x': 1620144000000, 'y': 0}, {'x': 1620147600000, 'y': 0}, {'x': 1620151200000, 'y': 0}, {'x': 1620154800000, 'y': 0}, {'x': 1620100800000, 'y': 0}],
    'google_trend': [{'x': 1620068400000, 'y': 15}, {'x': 1620072000000, 'y': 11}, {'x': 1620075600000, 'y': 9}, {'x': 1620079200000, 'y': 6}, {'x': 1620082800000, 'y': 6}, {'x': 1620086400000, 'y': 5}, {'x': 1620090000000, 'y': 4}, {'x': 1620093600000, 'y': 7}, {'x': 1620097200000, 'y': 9}, {'x': 1620100800000, 'y': 0}, {'x': 1620104400000, 'y': 0}, {'x': 1620108000000, 'y': 0}, {'x': 1620111600000, 'y': 0}, {'x': 1620115200000, 'y': 0}, {'x': 1620118800000, 'y': 0}, {'x': 1620122400000, 'y': 0}, {'x': 1620126000000, 'y': 0}, {'x': 1620129600000, 'y': 0}, {'x': 1620133200000, 'y': 0}, {'x': 1620136800000, 'y': 0}, {'x': 1620140400000, 'y': 0}, {'x': 1620144000000, 'y': 0}, {'x': 1620147600000, 'y': 0}, {'x': 1620151200000, 'y': 0}, {'x': 1620154800000, 'y': 0}, {'x': 1620100800000, 'y': 0}],
    'other_trend': [{'x': 1620068400000, 'y': 23}, {'x': 1620072000000, 'y': 12}, {'x': 1620075600000, 'y': 11}, {'x': 1620079200000, 'y': 13}, {'x': 1620082800000, 'y': 9}, {'x': 1620086400000, 'y': 17}, {'x': 1620090000000, 'y': 7}, {'x': 1620093600000, 'y': 31}, {'x': 1620097200000, 'y': 15}, {'x': 1620100800000, 'y': 0}, {'x': 1620104400000, 'y': 0}, {'x': 1620108000000, 'y': 0}, {'x': 1620111600000, 'y': 0}, {'x': 1620115200000, 'y': 0}, {'x': 1620118800000, 'y': 0}, {'x': 1620122400000, 'y': 0}, {'x': 1620126000000, 'y': 0}, {'x': 1620129600000, 'y': 0}, {'x': 1620133200000, 'y': 0}, {'x': 1620136800000, 'y': 0}, {'x': 1620140400000, 'y': 0}, {'x': 1620144000000, 'y': 0}, {'x': 1620147600000, 'y': 0}, {'x': 1620151200000, 'y': 0}, {'x': 1620154800000, 'y': 0}, {'x': 1620100800000, 'y': 0}],
    'typical_day': [{'x': 1620068400000, 'y': 38}, {'x': 1620072000000, 'y': 49}, {'x': 1620075600000, 'y': 31}, {'x': 1620079200000, 'y': 53}, {'x': 1620082800000, 'y': 143}, {'x': 1620086400000, 'y': 63}, {'x': 1620090000000, 'y': 29}, {'x': 1620093600000, 'y': 37}, {'x': 1620097200000, 'y': 64}, {'x': 1620100800000, 'y': 55}, {'x': 1620104400000, 'y': 51}, {'x': 1620108000000, 'y': 51}, {'x': 1620111600000, 'y': 53}, {'x': 1620115200000, 'y': 33}, {'x': 1620118800000, 'y': 33}, {'x': 1620122400000, 'y': 65}, {'x': 1620126000000, 'y': 41}, {'x': 1620129600000, 'y': 104}, {'x': 1620133200000, 'y': 58}, {'x': 1620136800000, 'y': 59}, {'x': 1620140400000, 'y': 60}, {'x': 1620144000000, 'y': 54}, {'x': 1620147600000, 'y': 46}, {'x': 1620151200000, 'y': 72}, {'x': 1620154800000, 'y': 0}]
  };

  // TODO: make this repeatable for all trend charts (referrer view, URL view, geography view etc)
  const series_to_plot = [
    {
      type: 'area',
      name: 'Google',
      data: data.google_trend,
      color: '#7fc97f'
    },
    {
      type: 'area',
      name: 'Direct',
      data: data.direct_trend,
      color: '#fdc086'
    },
    {
      type: 'area',
      name: 'Other',
      data: data.other_trend,
      color: '#d95f02'
    },
    {
      type: 'area',
      name: 'Facebook',
      data: data.facebook_trend,
      color: '#386cb0'
    },
    {
      type: 'line',
      name: '7 days ago',
      data: data.typical_day,
      color:'#e0e0e0'
    }, 
  ];

  const options = {
    chart: {
      marginRight: 10,
      backgroundColor: 'transparent'
    },
    time: {
      useUTC: false
    },
    title: {text: 'Pageviews compared to the typical day' },
    xAxis: {type: 'datetime', tickPixelInterval: 50},
    yAxis: {
      title: {text: null},
      plotLines: [{value: 0, width: 1, color: '#808080'}]
    },
    plotOptions: {
      area: {
        stacking: 'normal',
        lineColor: '#666666',
        lineWidth: 0,
        marker: {
          lineColor: '#666666'
        }
      },
      series: {
        marker: {enabled: false}
      }
    },        
    exporting: {enabled: false},
    credits: {enabled: false},
    series: series_to_plot
  }

  

  // Then, construct chart
  return (
    <Chart options={options}/>
  )
}

export default TrendChart
